[gd_scene load_steps=46 format=3 uid="uid://bkhdw8n7xmqpo"]

[ext_resource type="Script" uid="uid://cyo76ljp20m3q" path="res://scripts/bakery/bakery.gd" id="1_bakery"]
[ext_resource type="Texture2D" uid="uid://dflxrxqaofl3k" path="res://assets/textures/floor.png" id="2_floor_texture"]
[ext_resource type="Texture2D" uid="uid://cjmd22am1ssgg" path="res://assets/textures/plaster-wallpng.png" id="2_plaster_texture"]
[ext_resource type="PackedScene" uid="uid://cqp6vn8wrgx1f" path="res://scenes/player/player.tscn" id="2_player"]
[ext_resource type="Texture2D" uid="uid://tn3hj4nknl2l" path="res://assets/textures/brickwall.png" id="2_wall_texture"]
[ext_resource type="PackedScene" uid="uid://befxl6ys3xk5f" path="res://scenes/bakery/equipment/ingredient_storage.tscn" id="3_storage"]
[ext_resource type="PackedScene" uid="uid://dy7k5vqh1qk3j" path="res://scenes/bakery/equipment/mixing_bowl.tscn" id="4_mixing"]
[ext_resource type="PackedScene" uid="uid://c2h8tpnwm1r7e" path="res://scenes/bakery/equipment/oven.tscn" id="5_oven"]
[ext_resource type="PackedScene" uid="uid://csfh3qvkw5vbd" path="res://scenes/bakery/equipment/display_case.tscn" id="6_display"]
[ext_resource type="Script" uid="uid://dtpnqnbekyoy2" path="res://scripts/equipment/bag_station.gd" id="7_bag_script"]
[ext_resource type="PackedScene" uid="uid://register001" path="res://scenes/bakery/equipment/register.tscn" id="7_register"]
[ext_resource type="PackedScene" uid="uid://hud001" path="res://scenes/ui/hud.tscn" id="8_hud"]
[ext_resource type="PackedScene" uid="uid://cukekfhw0e20k" path="res://assets/enviroment/Green_Pendant_Light_1107210023_texture.glb" id="9_aug17"]
[ext_resource type="PackedScene" path="res://scenes/ui/planning_menu.tscn" id="9_planning"]
[ext_resource type="PackedScene" uid="uid://cf3c4wqwx6lhm" path="res://scenes/ui/dev_menu.tscn" id="10_devmenu"]
[ext_resource type="PackedScene" uid="uid://c3v8r1p2mxn4s" path="res://scenes/ui/quick_inventory.tscn" id="11_quickinv"]
[ext_resource type="PackedScene" path="res://scenes/ui/catalog_menu.tscn" id="12_catalogmenu"]
[ext_resource type="PackedScene" uid="uid://b4xas2q3nxm5t" path="res://scenes/ui/recipe_book.tscn" id="12_recipebook"]
[ext_resource type="PackedScene" uid="uid://bj481uu4rrf3" path="res://scenes/ui/story_letter.tscn" id="13_storyletter"]
[ext_resource type="PackedScene" uid="uid://c3j7y8yam2n4p" path="res://scenes/staff/staff_target.tscn" id="14_66x8v"]
[ext_resource type="PackedScene" uid="uid://bck6a2vv5ssg4" path="res://scenes/ui/event_notification.tscn" id="14_eventnotif"]
[ext_resource type="PackedScene" path="res://scenes/ui/shop_management_menu.tscn" id="14_shopmgmt"]
[ext_resource type="PackedScene" uid="uid://cbpcjwwajl5xu" path="res://assets/enviroment/Shelf_Display_Stand_1109143342_texture.glb" id="15_ccpe0"]
[ext_resource type="PackedScene" uid="uid://b0baqt88cf6qa" path="res://assets/enviroment/Vintage_Register_1109150240_texture.glb" id="16_xng6r"]
[ext_resource type="PackedScene" uid="uid://db4gqiwyxprk4" path="res://assets/enviroment/Empty_Shelf_1107211745_texture.glb" id="17_aug17"]
[ext_resource type="PackedScene" uid="uid://1lqrimgtfcv7" path="res://assets/enviroment/Yellow_Wooden_Chair__1107210114_texture.glb" id="22_sbep2"]
[ext_resource type="PackedScene" uid="uid://b736ongjpxnt1" path="res://assets/enviroment/Golden_Round_Table_1107210107_texture.glb" id="23_dsae0"]
[ext_resource type="PackedScene" uid="uid://vhfw445bc1ju" path="res://assets/enviroment/Bakery_Bag_1109214213_texture.glb" id="24_dsae0"]
[ext_resource type="PackedScene" uid="uid://dx5myx8ulfe14" path="res://assets/enviroment/Spiral_Stairs.glb" id="27_ul7db"]
[ext_resource type="PackedScene" uid="uid://c5ng07rlfab41" path="res://scenes/bakery/equipment/trash_can.tscn" id="28_trashcan"]
[ext_resource type="PackedScene" uid="uid://c4n5f4l5bi0pw" path="res://scenes/bakery/equipment/sink.tscn" id="29_sink"]
[ext_resource type="PackedScene" uid="uid://vvi2lpoqq815" path="res://assets/enviroment/shelf.glb" id="30_igr61"]
[ext_resource type="Script" uid="uid://0l1bf6i2fdsy" path="res://scripts/transitions/stairs.gd" id="31_stairs"]
[ext_resource type="PackedScene" path="res://scenes/ui/interact_prompt.tscn" id="32_interact"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_1"]
sky_horizon_color = Color(0.646, 0.656, 0.671, 1)
ground_horizon_color = Color(0.646, 0.656, 0.671, 1)

[sub_resource type="Sky" id="Sky_1"]
sky_material = SubResource("ProceduralSkyMaterial_1")

[sub_resource type="Environment" id="Environment_1"]
background_mode = 2
sky = SubResource("Sky_1")
ambient_light_source = 3
ambient_light_color = Color(1, 1, 1, 1)
ambient_light_energy = 0.5

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_floor"]
albedo_texture = ExtResource("2_floor_texture")
uv1_scale = Vector3(10, 10, 10)
texture_filter = 0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_backwall"]
albedo_texture = ExtResource("2_wall_texture")
uv1_scale = Vector3(5, 2, 1)
texture_filter = 0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_sidewalls"]
albedo_texture = ExtResource("2_plaster_texture")
uv1_scale = Vector3(3, 2, 3)
texture_filter = 0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_rightwall"]
albedo_texture = ExtResource("2_wall_texture")
uv1_scale = Vector3(5, 2, 1)
uv1_triplanar = true
uv1_world_triplanar = true
texture_filter = 0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ceiling"]
albedo_color = Color(0.95, 0.95, 0.95, 1)

[sub_resource type="NavigationMesh" id="NavigationMesh_1"]
vertices = PackedVector3Array(-9.75, 0.25, -9.75, -9.75, 0.25, 9.75, 9.75, 0.25, 9.75, 9.75, 0.25, -9.75)
polygons = [PackedInt32Array(3, 2, 0), PackedInt32Array(0, 2, 1)]

[sub_resource type="SphereShape3D" id="SphereShape3D_bag"]
radius = 1.5

[sub_resource type="CylinderShape3D" id="CylinderShape3D_stairs"]
height = 4.0
radius = 1.5

[node name="Bakery" type="Node3D"]
script = ExtResource("1_bakery")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_1")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.866, -0.433, 0.25, 0, 0.5, 0.866, -0.5, -0.75, 0.433, 0, 10, 0)
shadow_enabled = true

[node name="Floor" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.1, 0)
use_collision = true
size = Vector3(20, 0.2, 20)
material = SubResource("StandardMaterial3D_floor")

[node name="BackWall" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, -10)
use_collision = true
size = Vector3(20, 4, 0.2)
material = SubResource("StandardMaterial3D_backwall")

[node name="LeftWall" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -10, 2, 0)
use_collision = true
size = Vector3(0.2, 4, 20)
material = SubResource("StandardMaterial3D_sidewalls")

[node name="RightWall" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 9.999223, 1.9883919, 0.00019979477)
use_collision = true
size = Vector3(0.2, 4, 20)
material = SubResource("StandardMaterial3D_rightwall")

[node name="FrontWall" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 10)
use_collision = true
size = Vector3(20, 4, 0.2)
material = SubResource("StandardMaterial3D_sidewalls")

[node name="Ceiling" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.1, 0)
use_collision = true
size = Vector3(20, 0.2, 20)
material = SubResource("StandardMaterial3D_ceiling")

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.2498811, 0)
navigation_mesh = SubResource("NavigationMesh_1")

[node name="Player" parent="." instance=ExtResource("2_player")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 5)

[node name="Equipment" type="Node3D" parent="."]

[node name="IngredientStorage" parent="Equipment" instance=ExtResource("3_storage")]
transform = Transform3D(1, 0, 0, 0, 0.9999574, -0.009232661, 0, 0.009232661, 0.9999574, -7, 0.9817569, -9.016167)

[node name="MixingBowl" parent="Equipment" instance=ExtResource("4_mixing")]
transform = Transform3D(0.012408137, 0, 0.39903426, 0, 0.38033545, 0, -0.3459735, 0, 0.014311131, -2.9888554, 1.1651077, -9.129457)

[node name="Oven" parent="Equipment" instance=ExtResource("5_oven")]
transform = Transform3D(0.58341473, 0, 0, 0, 0.56954324, 0, 0, 0, 0.47729072, 0.72772014, 0.53112185, -8.737569)

[node name="DisplayCase" parent="Equipment" instance=ExtResource("6_display")]
transform = Transform3D(1.3329903, 0.0039855186, 0.028860595, -0.004188944, 1.4623233, 0.013425878, -0.039766014, -0.020442761, 0.966014, 5.2580814, 0.73389953, 0.18312323)

[node name="Register" parent="Equipment" instance=ExtResource("7_register")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.504613, 0.7331177, 0.08858752)

[node name="BagStation" type="Node3D" parent="Equipment"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.410219, 0.997391, -0.1318534)
script = ExtResource("7_bag_script")

[node name="Bakery_Bag_1109214213_texture" parent="Equipment/BagStation" instance=ExtResource("24_dsae0")]
transform = Transform3D(0.18609425, 0, 0, 0, 0.14770354, 0, 0, 0, 0.12664981, 0, 0, 0)

[node name="InteractionArea" type="Area3D" parent="Equipment/BagStation"]
transform = Transform3D(0.5879478, 0, 0, 0, 0.59732795, 0, 0, 0, 0.5928386, 0.08041191, 0, -0.27013212)
collision_layer = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="Equipment/BagStation/InteractionArea"]
shape = SubResource("SphereShape3D_bag")

[node name="Green_Pendant_Light_1107210023_texture" parent="Equipment" instance=ExtResource("9_aug17")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8.723861, 3.3550885, -0.025181651)

[node name="OmniLight3D" type="OmniLight3D" parent="Equipment/Green_Pendant_Light_1107210023_texture"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.9359851, 0)
light_color = Color(0.9764706, 0.9490196, 0.59607846, 1)
light_energy = 1.5
shadow_enabled = true
omni_range = 6.0
omni_attenuation = 2.0

[node name="Green_Pendant_Light_1107210023_texture2" parent="Equipment" instance=ExtResource("9_aug17")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.6432137, 3.3550885, -0.025181651)

[node name="OmniLight3D" type="OmniLight3D" parent="Equipment/Green_Pendant_Light_1107210023_texture2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.95552707, 0)
light_color = Color(0.9764706, 0.9490196, 0.59607846, 1)
light_energy = 1.5
shadow_enabled = true
omni_range = 6.0
omni_attenuation = 2.0

[node name="Green_Pendant_Light_1107210023_texture3" parent="Equipment" instance=ExtResource("9_aug17")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.78707, 3.3550885, -0.025181651)

[node name="OmniLight3D" type="OmniLight3D" parent="Equipment/Green_Pendant_Light_1107210023_texture3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.95631313, 0)
light_color = Color(0.9781874, 0.94706744, 0.5962764, 1)
light_energy = 1.5
shadow_enabled = true
omni_range = 6.0
omni_attenuation = 2.0

[node name="NavigationMarkers" type="Node3D" parent="."]

[node name="Entrance" type="Marker3D" parent="NavigationMarkers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 9)
gizmo_extents = 0.5

[node name="DisplayCase" type="Marker3D" parent="NavigationMarkers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5, 0, 0.2665558)
gizmo_extents = 0.5

[node name="Register" type="Marker3D" parent="NavigationMarkers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7, 0, 2)
gizmo_extents = 0.5

[node name="Exit" type="Marker3D" parent="NavigationMarkers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 9)
gizmo_extents = 0.5

[node name="PackageSpawn" type="Marker3D" parent="NavigationMarkers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 0, 6)
gizmo_extents = 0.5

[node name="StaffTargetSink" parent="NavigationMarkers" instance=ExtResource("14_66x8v")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7.711466, 0, -4.8996143)
target_name = "sink"
target_type = "cleaner"

[node name="StaffTargetStorage" parent="NavigationMarkers" instance=ExtResource("14_66x8v")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7.072268, 0, -7.7342186)
target_name = "storage"
target_type = "baker"

[node name="StaffTargetMixer" parent="NavigationMarkers" instance=ExtResource("14_66x8v")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.167636, 0, -8.00861)
target_name = "mixing_bowl"
target_type = "baker"

[node name="StaffTargetOven" parent="NavigationMarkers" instance=ExtResource("14_66x8v")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.7829286, 0, -7.3353405)
target_name = "oven"
target_type = "baker"

[node name="StaffTargetTrash" parent="NavigationMarkers" instance=ExtResource("14_66x8v")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.9713962, 0, -0.003097415)
target_name = "trash"
target_type = "cleaner"

[node name="StaffTargetDisplay" parent="NavigationMarkers" instance=ExtResource("14_66x8v")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.2778573, 0, -1.4102167)
target_name = "display"
target_type = "cashier"

[node name="StaffTargetRegister" parent="NavigationMarkers" instance=ExtResource("14_66x8v")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.5159855, 0, -1.4102167)
target_name = "register"
target_type = "cashier"

[node name="Customers" type="Node3D" parent="."]

[node name="UILayer" type="CanvasLayer" parent="."]

[node name="HUD" parent="UILayer" instance=ExtResource("8_hud")]

[node name="PlanningMenu" parent="UILayer" instance=ExtResource("9_planning")]

[node name="DevMenu" parent="UILayer" instance=ExtResource("10_devmenu")]

[node name="QuickInventory" parent="UILayer" instance=ExtResource("11_quickinv")]

[node name="RecipeBook" parent="UILayer" instance=ExtResource("12_recipebook")]

[node name="CatalogMenu" parent="UILayer" instance=ExtResource("12_catalogmenu")]

[node name="StoryLetter" parent="UILayer" instance=ExtResource("13_storyletter")]

[node name="EventNotification" parent="UILayer" instance=ExtResource("14_eventnotif")]

[node name="ShopManagementMenu" parent="UILayer" instance=ExtResource("14_shopmgmt")]

[node name="Enviroment" type="Node3D" parent="."]

[node name="Shelf_Display_Stand_1109143342_texture" parent="Enviroment" instance=ExtResource("15_ccpe0")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8.929052, 0.9718367, 0.05895245)

[node name="Vintage_Register_1109150240_texture" parent="Enviroment" instance=ExtResource("16_xng6r")]
transform = Transform3D(-0.25153622, 0, -0.0015886344, 0, 0.25118166, 0, 0.0017560747, 0, -0.22755247, 6.881787, 1.095661, -0.075252086)

[node name="Empty_Shelf_1107211745_texture" parent="Enviroment" instance=ExtResource("17_aug17")]
transform = Transform3D(-0.99999356, 0, -0.003595257, 0, 0.51430047, 0, 0.003595257, 0, -0.99999356, -2.9574025, 0.43832237, -9.12709)

[node name="Yellow_Wooden_Chair__1107210114_texture" parent="Enviroment" instance=ExtResource("22_sbep2")]
transform = Transform3D(0.00152797, 0, 0.6067501, 0, 0.56507844, 0, -0.5836321, 0, 0.001588494, -2.2160487, 0.52257085, 7.8913865)

[node name="Yellow_Wooden_Chair__1107210114_texture2" parent="Enviroment" instance=ExtResource("22_sbep2")]
transform = Transform3D(0.32390243, 0, -0.504737, 0, 0.56507844, 0, 0.4855059, 0, 0.33673236, 0.17573047, 0.52257085, 7.8913865)

[node name="Golden_Round_Table_1107210107_texture" parent="Enviroment" instance=ExtResource("23_dsae0")]
transform = Transform3D(0.5289513, 0, 0, 0, 0.46446148, 0, 0, 0, 0.5392542, -1.157328, 0.45804185, 7.819732)

[node name="Spiral_Stairs" type="Area3D" parent="Enviroment"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.8447475, 0, -7.460956)
script = ExtResource("31_stairs")
destination_scene = "res://scenes/apartment/apartment.tscn"

[node name="Spiral_Stairs_Model" parent="Enviroment/Spiral_Stairs" instance=ExtResource("27_ul7db")]
transform = Transform3D(2.21123, 0, 0.07862306, 0, 1.9315403, 0, -0.08316916, 0, 2.0903697, 0, 1.6390104, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Enviroment/Spiral_Stairs"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 0)
shape = SubResource("CylinderShape3D_stairs")

[node name="InteractPrompt" parent="Enviroment/Spiral_Stairs" instance=ExtResource("32_interact")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.718947, 2.2255702)
visible = false

[node name="TrashCan" parent="Enviroment" instance=ExtResource("28_trashcan")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.8246658, 0.497823, 0.13220263)
time_to_fill = 60.0

[node name="Sink" parent="Enviroment" instance=ExtResource("29_sink")]
transform = Transform3D(-0.014547241, 0, 0.7062842, 0, 0.6680406, 0, -0.7781522, 0, -0.013203697, -9.3445, 0.68980396, -5.358016)
fill_time = 5.0
wash_time = 5.0
dish_spawn_interval = 30.0
max_dishes = 15

[node name="shelf" parent="Enviroment" instance=ExtResource("30_igr61")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.023025, 0.9671869, -9.447676)

[node name="shelf2" parent="Enviroment" instance=ExtResource("30_igr61")]
transform = Transform3D(2.0972962, 0, 0, 0, 1, 0, 0, 0, 1, 5.69846, 0.9671869, -9.447676)
